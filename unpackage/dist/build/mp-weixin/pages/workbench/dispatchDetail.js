(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/workbench/dispatchDetail"],{"37dc":function(t,e,i){"use strict";i.r(e);var n=i("b0a0"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},3983:function(t,e,i){},7101:function(t,e,i){"use strict";(function(t,e){var n=i("4ea4");i("78aa");n(i("66fd"));var a=n(i("975c"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(a.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},"975c":function(t,e,i){"use strict";i.r(e);var n=i("b165"),a=i("37dc");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("cb97");var r=i("f0c5"),s=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"48deaf10",null,!1,n["a"],void 0);e["default"]=s.exports},b0a0:function(t,e,i){"use strict";(function(t){var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("9523")),o=n(i("04bd")),r=i("26cb");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={data:function(){return{list:[{title:"派工单号",name:"dispatchNo",text:""},{title:"派单项次",name:"dispatchPrior",text:""},{title:"产品编码",name:"itemNo",text:""},{title:"计划产量",name:"dispatchQty",text:""},{title:"已生产数",name:"prodQty",text:""},{title:"计划开始时间",name:"planStartTime",text:""},{title:"计划结束时间",name:"planEndTime",text:""},{title:"实际开始时间",name:"actualStartTime",text:""}],childList:[],mouldList:[{title:"模具编号",name:"mouldNo",text:""},{title:"模穴数",name:"socketQty",text:""},{title:"每模产品数",name:"productNum",text:""},{title:"标准周期",name:"standCycle",text:""},{title:"模具库位",name:"warehouseLocation",text:""}],metarialList:[],listPace:[{id:"00",name:"子件"},{id:"01",name:"模具信息"},{id:"02",name:"物料"}],tabList:[{name:"全部"},{name:"停机"},{name:"非停机"}],isent:!1,detailData:{},searchBtnIdx:0,listPaceCurrent:0,machineNo:null,isSelectedId:null,eventId:null}},onLoad:function(e){var i=this;t.$on("returnCard",(function(t){console.log("发出的值===>",t),t&&i.getEvents()})),e.machineNo&&(this.machineNo=e.machineNo,this.getEvents()),t.$u.http.get(o.default.detail+"id="+e.id).then((function(t){console.log("result",t),200===t.code&&(i.detailData=t.data,i.detailData&&(i.getList(),i.getChildList(),i.getMouldList(),i.getMetarialList()))})).catch((function(t){console.log("er",t)})).finally((function(){i.isGet=!1}))},onUnload:function(){t.$off("returnCard")},computed:l(l({},(0,r.mapState)(["permission","machine"])),{},{setPercentage:function(){if(!this.detailData.prodQty)return 0;var t=this.detailData.prodQty/this.detailData.dispatchQty*100;return t>=100?100:(t=t.toFixed("2"),parseFloat(t))},searchPermission:function(){return 0===this.searchBtnIdx?this.permission:1===this.searchBtnIdx?this.permission.filter((function(t){return"Y"===t.stopType})):2===this.searchBtnIdx?this.permission.filter((function(t){return"N"===t.stopType})):void 0}}),methods:{getList:function(){var t=this;this.list.forEach((function(e){e.text=t.detailData[e.name]}))},getChildList:function(){this.detailData.params.childrenList&&(this.childList=this.detailData.params.childrenList)},getMouldList:function(){var t=this;this.detailData.params.mould&&this.mouldList.forEach((function(e){"socketQty"===e.name||"standCycle"===e.name?e.text=t.detailData[e.name]:e.text=t.detailData.params.mould[e.name]}))},getMetarialList:function(){this.detailData.params.itemBomList&&(this.metarialList=this.detailData.params.itemBomList)},getEvents:function(){var t=this;this.$http.get(this.$api.workbrench.getNotEvent+"?machineNo="+this.machineNo).then((function(e){var i,n,a;200===e.code&&(null!==(i=e.data)&&void 0!==i&&i.cardType&&11!==e.data.cardType&&17!==e.data.cardType&&14!==e.data.cardType?(t.isSelectedId=null===(n=e.data)||void 0===n?void 0:n.cardType,t.eventId=null===(a=e.data)||void 0===a?void 0:a.id):(t.isSelectedId=0,t.eventId=void 0))}))},changeBusiness:function(t){this.listPaceCurrent=t,console.log(this.listPace[t].id),console.log(this.chooseurl+"?current=1&size=5&status="+this.listPace[t].id)},click:function(t){console.log("item",t.index)},itemClick:function(t){if(console.log("item",t),"RGB_Material"===t.tag){var e={detail:this.detailData,id:t.id,tag:t.tag};this.$nav.to("/pages/workbench/feeding?detail="+JSON.stringify(e))}else if("RGB_Patro"===t.tag||"RGB_Polish"===t.tag){var i={machineNo:this.detailData.machineNo,id:this.detailData.id,tag:t.tag};this.$nav.to("/pages/workbench/patrolMachine?detail="+JSON.stringify(i))}else if("RGB_DispatchMove"===t.tag){var n={machineNo:this.detailData.machineNo,id:this.detailData.id,tag:t.tag};this.$nav.to("/pages/workbench/dispatchTransfer?detail="+JSON.stringify(n))}},tableClick:function(t){console.log("item",t),this.searchBtnIdx=t.index},getIsShow:function(t){var e=["RGB_System","RGP_48","RGB_TestMaterial","RGB_ProjectWait"];return this.detailData.dispatchStatus===this.$config.dispatchState.ASSIGN?![].concat(e,["RGP_StartProduce"]).includes(t):![].concat(e,["RGB_Material","RGB_Patro","RGP_AdjustMultiMum","RGP_AlterBill","RGP_MaterialIssue","RGP_Next","RGP_ChangeCycle","RGP_DebugMachine","RGP_NoProductionPlan","RGP_OffDuty","RGP_OnDuty","All_FuncID_0","RGP_WaitMan","RGP_WaitMaterial","RGB_TestMould","RGB_TestMaterial","RGP_AlterMaterial","RGB_Polish"]).includes(t)}}};e.default=u}).call(this,i("543d")["default"])},b165:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uButton:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-button/u-button")]).then(i.bind(null,"4c6d"))},uLineProgress:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-line-progress/u-line-progress")]).then(i.bind(null,"5afa"))},uCell:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-cell/u-cell")]).then(i.bind(null,"09bb"))},uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"8d70"))},uSubsection:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-subsection/u-subsection")]).then(i.bind(null,"970b6"))},uTabs:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(i.bind(null,"7256"))},uGrid:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-grid/u-grid")]).then(i.bind(null,"421e"))},uGridItem:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-grid-item/u-grid-item")]).then(i.bind(null,"fa78d"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.detailData.dispatchStatus===t.$config.dispatchState.ASSIGN?t.$t("已派工"):null),n=t.detailData.dispatchStatus!==t.$config.dispatchState.ASSIGN?t.$t("未派工"):null,a=t.$t("工单号"),o=t.isent?null:t.list.slice(0,2),r=0===t.listPaceCurrent?t.__map(t.childList,(function(e,i){var n=t.__get_orig(e),a=t.$t("产品名称"),o=t.$t("产品编号"),r=t.$t("工单编号");return{$orig:n,m3:a,m4:o,m5:r}})):null,s=0!==t.listPaceCurrent&&1!=t.listPaceCurrent&&2==t.listPaceCurrent?t.metarialList.length:null,l=0!==t.listPaceCurrent&&1!=t.listPaceCurrent&&2==t.listPaceCurrent&&s>0?t.$t("物料名称"):null,u=0!==t.listPaceCurrent&&1!=t.listPaceCurrent&&2==t.listPaceCurrent&&s>0?t.$t("物料编码"):null,c=t.__map(t.searchPermission,(function(e,i){var n=t.__get_orig(e),a=t.getIsShow(e.tag);return{$orig:n,m8:a}}));t._isMounted||(t.e0=function(e){t.isent=!t.isent},t.e1=function(e){t.isent=!t.isent}),t.$mp.data=Object.assign({},{$root:{m0:i,m1:n,m2:a,g0:o,l0:r,g1:s,m6:l,m7:u,l1:c}})},o=[]},cb97:function(t,e,i){"use strict";var n=i("3983"),a=i.n(n);a.a}},[["7101","common/runtime","common/vendor"]]]);