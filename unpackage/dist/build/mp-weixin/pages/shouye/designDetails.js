(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shouye/designDetails"],{6003:function(e,t,i){"use strict";i.r(t);var n=i("e532"),s=i("8665");for(var o in s)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(o);i("bbe5");var c=i("f0c5"),r=Object(c["a"])(s["default"],n["b"],n["c"],!1,null,"2ff62125",null,!1,n["a"],void 0);t["default"]=r.exports},"643a":function(e,t,i){},8665:function(e,t,i){"use strict";i.r(t);var n=i("b326"),s=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=s.a},b326:function(e,t,i){"use strict";(function(e){var n=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i("2eee")),o=n(i("c973")),c=(n(i("b9d8")),n(i("1cfd")),n(i("10df")),{data:function(){return{indexList:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","AA","BB","CC","DD","EE","FF","GG","HH","II","JJ","KK","LL","MM","NN","OO","PP","QQ","RR","SS","TT","UU","WW","XX","YY","ZZ"],list:[],leftCurrentIndex:0,rightCurrentIndex:0,lefttoView:"",righttoView:"",shop_tag_type:[],select_shop_type:{},select_shop_type_id:null,select_shop_type_name:"",select_shop_tags:[],designInfo:{},loading:!1,topArr:[],isMainScroll:!1}},onLoad:function(e){var t=this;e.designInfo&&(this.designInfo=JSON.parse(e.designInfo)),this.designInfo.taskId?(this.select_shop_type_id=this.designInfo.shopType,this.select_shop_tags=this.designInfo.shopTags,console.log("shopTypeId=",this.select_shop_type_id),console.log("shopTags=",this.select_shop_tags)):e.shopTypeId&&(this.select_shop_type_id=e.shopTypeId,console.log("shopTypeId=",this.select_shop_type_id)),this.loading=!0,setTimeout((function(){t.getData()}),100)},methods:{getElementTop:function(){var e=this;return(0,o.default)(s.default.mark((function t(){var i,n,o;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=[],n=0;case 2:if(!(n<e.list.length)){t.next=10;break}return t.next=5,e.getScrollTop("#item-".concat(n));case 5:o=t.sent,i.push(o);case 7:n++,t.next=2;break;case 10:console.log("parr=",i),e.getScrollTop("#scroll-el").then((function(t){Promise.all(i).then((function(t){e.topArr=t}))}));case 12:case"end":return t.stop()}}),t)})))()},getScrollTop:function(t){var i=this;return new Promise((function(n,s){var o=e.createSelectorQuery().in(i);o.select(t).boundingClientRect((function(e){n(e.top)})).exec()}))},mainScroll:function(e){var t=this;if(this.isMainScroll){var i=e.detail.scrollTop,n=-1;n=i>=this.topArr[this.topArr.length-1]?this.topArr.length-1:this.topArr.findIndex((function(e,n){return t.topArr[n+1]>=i})),this.leftCurrentIndex=n<0?0:n,this.leftCurrentIndex>8?this.lefttoView="leftitem-".concat(this.list.length-1):this.lefttoView="leftitem-".concat(0)}},mainTouch:function(){this.isMainScroll=!0},leftIttemClick:function(e){this.isMainScroll=!1,this.leftCurrentIndex=e,this.righttoView="item-".concat(e)},rightItemClick:function(e){this.isMainScroll=!1,this.leftCurrentIndex=e,this.righttoView="item-".concat(e),this.leftCurrentIndex>8?this.lefttoView="leftitem-".concat(this.list.length-1):this.lefttoView="leftitem-".concat(0)},nextClick:function(){console.log("标签=",this.list);var e=this.list.filter((function(e){return!1===e.checked&&"6"!==e.id&&"7"!==e.id}));if(e.length>0){console.log("没有");var t=this.list.findIndex((function(t){if(t.id==e[0].id)return!0}));return this.$u.toast("请选择"+e[0].name),this.isMainScroll=!1,this.leftCurrentIndex=t,void(this.righttoView="item-".concat(t))}console.log("保存的数据= ",this.list);var i=[];this.list.forEach((function(e){e.checked&&e.childlist.forEach((function(e){e.checked&&(i.push(e.id),e.childlist.forEach((function(e){e.checked&&i.push(e.id)})))}))})),console.log("ids",i),this.$config.design.select_shop_tags=i,this.$config.design.select_shop_type=this.select_shop_type_id,this.$set(this.designInfo,"shopType",this.select_shop_type_id),this.$set(this.designInfo,"shopTags",i),this.$nav.to("/pages/shouye/selectBrand",{designInfo:JSON.stringify(this.designInfo)},!1)},radioClick:function(e){this.list[e].map((function(e,t){e.checked=t===name}))},getData:function(){var e=this;return(0,o.default)(s.default.mark((function t(){var i;return s.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.newTagData();case 3:i=t.sent,e.loading=!1,e.list=i,e.$nextTick((function(){setTimeout((function(){e.getElementTop()}),1e3)})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(err);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},newTagData:function(){var t=this,i=new Promise((function(i){var n=e.getStorageSync(t.$config.storage.queryData),s=n["shop_type"],o=n["shop_tag"],c=[],r=[],a="";switch(parseInt(t.select_shop_type_id)){case 2:a="上衣",r=[102,103,106,109,110,114];break;case 4:a="裤子",r=[101,102,104,105,106,107,108,109,111,112,113];break;case 24:a="半身裙",r=[101,103,104,105,106,107,108,110,111,112,113];break;case 23:a="连衣裙",r=[101,103,105,107,108,110];break}if(23===parseInt(t.select_shop_type_id)||24===parseInt(t.select_shop_type_id)){var l={id:t.select_shop_type_id,name:a,index:t.indexList[0],double:!1,checked:!0,childlist:[{id:t.select_shop_type_id,name:a,checked:!0,childlist:[]}]};c.push(l)}else{var d=s.filter((function(e){return e.parent_id===t.select_shop_type_id})),h=t.select_shop_tags.length>0,u={id:t.select_shop_type_id,name:a,index:t.indexList[0],double:!1,checked:h,childlist:t.getTypeChildList(d)};c.push(u)}var p=o.filter((function(e){return"0"===e.parent_id})),f=p.filter((function(e){return!r.includes(parseInt(e.id))}));f=f.sort((function(e,t){return e.sequence-t.sequence})),console.log("pBrr=",f),f.forEach((function(e,i){var n=o.filter((function(t){return t.parent_id===e.id})),s=2==parseInt(e.id)||5==parseInt(e.id)||6==parseInt(e.id)||7==parseInt(e.id),r=(t.select_shop_tags.length||"7"==e.id||"6"==e.id)>0,a={id:e.id,name:e.tag_name,double:s,checked:r,index:t.indexList[i+1],childlist:t.getTagChildList(n,s)};"2"===e.id||"5"===e.id?(a.childlist.forEach((function(e){var i=o.filter((function(t){return parseInt(t.parent_id)===parseInt(e.id)}));e.childlist=t.getTagChildList(i,!0)})),a.childlist.length>0&&c.push(a)):c.push(a)})),i(c)}));return i},tagData:function(){var t=this,i=new Promise((function(i){var n=e.getStorageSync(t.$config.storage.queryData),s=n["shop_type"],o=n["shop_tag"],c=[],r=[t.select_shop_type];if("23"===t.select_shop_type.id||"24"===t.select_shop_type.id){var a={id:t.select_shop_type.id,name:t.select_shop_type.type_name,index:t.indexList[0],double:!1,checked:!0,childlist:[{id:t.select_shop_type.id,name:t.select_shop_type.type_name,checked:!0}]};c.push(a)}else r.forEach((function(e){var i=s.filter((function(t){return t.parent_id===e.id})),n={id:e.id,name:e.type_name,index:t.indexList[0],double:!1,checked:!1,childlist:t.getTypeChildList(i)};c.push(n)}));var l=t.$config.design.shop_tag_types;l.forEach((function(e,i){var n=o.filter((function(t){return t.parent_id===e.id})),s="2"==e.id||"5"==e.id||"6"==e.id||"7"==e.id,r={id:e.id,name:e.tag_name,double:s,checked:!1,index:t.indexList[i+1],childlist:t.getTagChildList(n,s)};"2"===e.id&&(console.log("进来了"),r.childlist.forEach((function(e){var t=o.filter((function(t){return parseInt(t.parent_id)===parseInt(e.id)}));console.log("特定类目下的标签brr=",t)}))),c.push(r)})),i(c)}));return i},getTypeChildList:function(e){var t=this,i=[],n=!1;return e.forEach((function(e){t.select_shop_tags&&(n=t.select_shop_tags.includes(parseInt(e.id)));var s={id:e.id,name:e.type_name,checked:n,double:!1,childlist:[]};i.push(s)})),i.slice().reverse()},getTagChildList:function(e,t){var i=this,n=[],s=!1;return e.forEach((function(e){i.select_shop_tags&&(s=i.select_shop_tags.includes(parseInt(e.id)));var o={id:e.id,name:"背面"===e.tag_name?"正面 + 背面":e.tag_name,double:t,checked:s,childlist:[]};n.push(o)})),n.slice().reverse()},getTagCChildList:function(e){var t=this,i=[],n=!1;return e.forEach((function(e){t.select_shop_tags&&(n=t.select_shop_tags.includes(parseInt(e.id)));var s={id:e.id,name:e.tag_name,checked:n};i.push(s)})),i.slice().reverse()}}});t.default=c}).call(this,i("543d")["default"])},bbe5:function(e,t,i){"use strict";var n=i("643a"),s=i.n(n);s.a},cc40:function(e,t,i){"use strict";(function(e,t){var n=i("4ea4");i("78aa");n(i("66fd"));var s=n(i("6003"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(s.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},e532:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return n}));var n={tagView:function(){return i.e("components/tag-view/tag-view").then(i.bind(null,"e73e"))},uOverlay:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-overlay/u-overlay")]).then(i.bind(null,"f20b"))},uLoadingIcon:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(i.bind(null,"5e6d"))}},s=function(){var e=this.$createElement;this._self._c},o=[]}},[["cc40","common/runtime","common/vendor"]]]);